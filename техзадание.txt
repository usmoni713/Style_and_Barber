Техническое задание (ТЗ) на разработку веб-приложения «Система онлайн-записи для сети парикмахерских «Стиль и Барбер»

Версия: 1.0
Дата: 20.10.2023
Заказчик: Иванов Петр Сергеевич (сеть парикмахерских «Стиль и Барбер»)
Цель проекта: Разработка современного, удобного и надежного веб-сайта с системой онлайн-записи для клиентов и административной панелью для управления салонами, мастерами и расписанием.
1. Введение и общее описание

Нам требуется не просто сайт-визитка, а полноценное веб-приложение, которое станет основным каналом привлечения и удержания клиентов. У нас 3 салона в городе, в каждом работает от 5 до 10 мастеров разной специализации (парикмахеры, барберы, колористы, мастера маникюра). Клиенты должны иметь возможность самостоятельно, в любое время, выбрать салон, услугу, конкретного мастера (или довериться выбору системы), выбрать удобное время и записаться. Мы, как администраторы, хотим иметь полный контроль над всем процессом.

Основные пользовательские роли:

    Неавторизованный клиент (Гость): Может просматривать список салонов, услуги, мастеров и доступное время, но для записи должен зарегистрироваться/авторизоваться.

    Авторизованный клиент: Все возможности гостя + возможность записи, просмотра истории своих записей, их отмены.

    Администратор салона: Полный доступ к управлению своим салоном (расписание своих мастеров, просмотр записей).

    Супер-администратор (SuperAdmin): Полный контроль над всей системой (все салоны, все мастера, все услуги, все пользователи).

2. Детальные функциональные требования
2.1. Публичная часть (для клиентов)

2.1.1. Главная страница:

    Приветственный блок.

    Преимущества онлайн-записи.

    Ссылка на переход к записи.

    Контактная информация салонов.

2.1.2. Система онлайн-записи (многостраничный процесс):

    Выбор салона: Карта или список с адресами, фото, описанием.

    Выбор услуги: Древовидный каталог. Услуги сгруппированы по категориям (например: "Стрижки", "Окрашивание", "Уход"). У каждой услуги есть название, описание, продолжительность в минутах (критически важный параметр для расчета расписания!) и цена.

    Выбор мастера:

        Список мастеров, которые выполняют выбранную услугу в выбранном салоне.

        У каждого мастера: фото, имя, специализация, рейтинг, описание.

        Должна быть опция "Любой свободный мастер".

    Выбор даты и времени:

        Календарь с отметками доступных дней.

        При выборе даты показывается сетка свободного времени с учетом продолжительности услуги и графика работы выбранного мастера (или всех мастеров, если выбран "любой").

        Учесть обеденные перерывы мастера/салона.

        Не показывать время, которое уже занято другими записями.

        Не показывать время, которое меньше чем через N часов от текущего момента (например, запись минимум за 2 часа).

    Подтверждение и ввод данных:

        Сводная информация: Салон, Услуга, Мастер, Дата/время, Цена.

        Для авторизованных клиентов — данные подставляются автоматически.

        Для новых клиентов — форма регистрации: Имя, Фамилия, Телефон (обязательно), Email, Пароль.

        Поле для комментария к записи (например, "хочу такую же стрижку, как на фото по ссылке").

    Подтверждение записи:

        Страница с успешным завершением, деталями записи и уникальным номером заказа.

        Отправка уведомления клиенту на email/SMS (в ТЗ — реализовать эмуляцию отправки через логирование или заглушку API).

        Отправка уведомления мастеру/администратору.

2.1.3. Личный кабинет клиента:

    Авторизация: По логину (телефон/email) и паролю.

    Профиль: Редактирование своих данных.

    История записей: Таблица с текущими и прошедшими записями. Статусы записи: "Подтверждена", "Выполнена", "Отменена клиентом", "Отменена салоном".

    Отмена записи: Клиент может отменить будущую запись. При отмене время в расписании мастера должно освобождаться.

2.2. Административная часть (Backoffice)

Доступ по защищенному URL (/admin). Обязательна авторизация.

2.2.1. Управление сущностями (CRUD для SuperAdmin):

    Салоны: Добавление, редактирование (адрес, телефон, часы работы, фото).

    Услуги и категории: Создание дерева категорий и услуг. Для услуги: привязка к категории, указание базовой цены и продолжительности.

    Мастера: Добавление мастера (личные данные, фото, описание), привязка к одному или нескольким салонам, указание графика работы (например, пн-пт с 10:00 до 19:00, обед 13:00-14:00), привязка списка услуг, которые он оказывает (с возможностью указать индивидуальную цену на услугу для этого мастера).

    Клиенты: Просмотр списка, блокировка.

2.2.2. Управление расписанием и записями:

    Календарь/сетка записей: Просмотр всех записей на выбранную дату по всем мастерам салона или конкретному мастеру.

    Ручное создание/редактирование записи: Возможность администратора записать клиента по телефону.

    Изменение статуса записи: Отметить как "Выполнена", отменить с указанием причины.

    Экстренные действия: Возможность "закрыть" время мастера (например, на отпуск или болезнь) — чтобы это время не было доступно для онлайн-записи.

2.2.3. Отчеты (базовые):

    Количество записей за период (день/неделя/месяц).

    Загрузка мастеров (сколько записей у каждого).

    Самые популярные услуги.

3. Технические требования
3.1. Стек технологий (ваша практика):

    Бэкенд: FastAPI (Python 3.10+).

    База данных: PostgreSQL (предпочтительно для продакшена) или SQLite (для упрощения разработки и демонстрации — на ваш выбор).

    Асинхронность: Желательно использовать asyncpg и асинхронные эндпоинты FastAPI для эффективной работы с БД.

    Аутентификация: JWT-токены (access/refresh).

    Валидация данных: Pydantic v2.

    Миграции БД: Alembic.

3.2. Требования к API:

    RESTful API с четким разделением на публичные и приватные эндпоинты.

    Документация автоматически генерируется Swagger UI (/docs) и ReDoc (/redoc).

    Все ответы и ошибки должны быть структурированы (JSON).

    Пример эндпоинта: GET /api/v1/salons/{salon_id}/masters?service_id=5 → должен вернуть список мастеров конкретного салона, оказывающих конкретную услугу.

3.3. Требования к базе данных (ключевой момент для практики):

Необходимо спроектировать нормализованную схему. Примерные сущности и их связи:

    users (клиенты): id, phone, email (hashed), hashed_password, first_name, last_name, is_active, created_at.

    salons: id, title, address, phone, work_schedule (JSON), photo_url.

    services: id, category_id, title, description, duration_minutes, base_price.

    masters: id, user_id (может быть ссылкой на users или отдельная сущность), photo, specialization, about.

    master_salon (связь многие-ко-многим): master_id, salon_id.

    master_service (связь многие-ко-многим с дополнительным полем): master_id, service_id, personal_price (если NULL, берется base_price из services).

    appointments (главная сущность записи): id, client_id, salon_id, master_id, service_id, date_time (начало услуги), end_time (рассчитывается как date_time + duration из service), status, comment, created_at.

    working_hours (график работы мастера): id, master_id, salon_id, day_of_week (0-6), start_time, end_time, break_start, break_end.

Важные задачи по БД:

    Продумать индексы для полей, участвующих в частых поисках и JOIN (appointments.date_time, appointments.master_id).

    Использовать внешние ключи (Foreign Keys) для целостности данных.

    При выборке свободного времени для записи потребуется сложный SQL-запрос с исключением уже занятых слотов и учетом графика работы.

4. Требования к интерфейсу и дизайну

    Фронтенд: Для целей вашей практики достаточно простого, но аккуратного интерфейса на HTML/CSS/JavaScript (Vanilla JS или небольшой фреймворк, например, HTMX). Основная цель — продемонстрировать работу бэкенда.

    Адаптивность: Интерфейс должен быть удобным на мобильных устройствах (как минимум, процесс записи).

    Админка: Можно использовать готовые шаблоны (например, AdminLTE) или сделать минималистичную панель. Функциональность важнее красоты.

5. Нефункциональные требования и безопасность

    Безопасность: Хэширование паролей (bcrypt), защита от SQL-инъекций (ORM/SQLAlchemy решают), валидация всех входящих данных.

    Производительность: Критичны запросы на получение свободного времени. Не должно быть N+1 проблемы при загрузке связанных данных (мастер, услуга и т.д.).

    Логирование: Логировать важные события (создание/отмена записи, ошибки авторизации).

6. Этапы приемки и критерии готовности

    Этап 1: Рабочий прототип с БД. Возможность создать салон, услугу, мастера через админку и сделать одну запись через API (например, протестировать в Postman).

    Этап 2: Готовый процесс онлайн-записи через браузер (публичная часть). Работает выбор салона -> услуги -> мастера -> даты/времени -> подтверждение.

    Этап 3: Готовая админ-панель с основными CRUD и управлением записями.

    Этап 4: Реализованы все дополнительные функции (личный кабинет, отмена, базовые отчеты).

    Финальная приемка: Предоставление исходного кода на GitHub, инструкции по запуску (docker-compose или README с pip install), и живой демонстрации работы системы.

7. Дополнительные рекомендации для разработчика (от заказчика)

Это ваш первый проект на FastAPI, поэтому я ценю качество и понимание архитектуры больше, чем скорость. Сфокусируйтесь на чистоте кода, правильной работе с БД и обработке крайних случаев (например, что если два клиента одновременно пытаются занять одно и то же время?). Готов ответить на ваши вопросы по ТЗ в процессе работы.

Удачи в разработке! Жду вашего предложения по срокам и стоимости (в рамках этого учебного задания можете их обозначить условно).